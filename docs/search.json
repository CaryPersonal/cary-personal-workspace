[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Cary’s Personal Workspace",
    "section": "",
    "text": "Required Packages\n\nlibrary(Hmisc)\nlibrary(RColorBrewer)\nlibrary(ggplot2)\nlibrary(maps)\nlibrary(robustbase)\n\n\n\n\n\n\n\n\n\n\nNA (Not Available): missing values; NaN (Not a Number): illegal operations\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nspecies.data <- read.table(\"galapagos.dat\", header = TRUE)\n\nWhat is the name of the (smallest) / (second largest) Galapagos island in the dataset?\n\n## the smallest\nrownames(species.data)[which.min(species.data$Area)]\n## the second largest\nrownames(species.data)[order(species.data$Area, decreasing = TRUE)[2]]\n\nHow many plant species are there in total on the second largest Galapagos island in the dataset?\n\nspecies.data$Species[order(species.data$Area, decreasing = TRUE)[2]]\n\nWhat is the name of the island with a value of 25 for the Elevation variable?\n\nrownames(species.data)[species.data$Elevation == 25]\n\nHow many islands have fewer than 25 species in total?\n\nsum(species.data$Species < 25)\n\nWhat is the estimated slope in a linear regression of Area upon Scruz?\n\nModel <- lm(Area ~ Scruz, data = species.data)\nsummary(Model)\nprint(Model$coefficients, digits = 8)\n\n\n\n\n\niris <- iris\n\nWhat is the mean of the petal widths for all of the flowers in the dataset?\n\nmean(iris$Petal.Width)\n\nWhat is the mean of the petal widths for all of the “setosa” flowers in the dataset?\n\nmean(iris$Petal.Width[iris$Species == \"setosa\"])\n## or\ntapply(iris$Petal.Width, INDEX = iris$Species, FUN = mean)\n\nConsidering the petal lengths of the flowers, which of the three species has the largest standard deviation?\n\ntapply(iris$Petal.Length, INDEX = iris$Species, FUN = sd)\n\nWhat is the 40th percentile of the petal lengths for all of the flowers in the dataset?\n\nprint(quantile(iris$Petal.Length, probs = 0.4), digits = 8)\n\nConsidering the petal lengths of the flowers, which of the three species has the largest 90th percentile?\n\ntapply(iris$Petal.Length, INDEX = iris$Species, FUN = quantile, probs = 0.9)\n\nCarry out a two-tailed t test, assuming equal variances, for a difference between the population mean petal widths for “versicolor” and “virginica” flowers.\n\nresult <- t.test(iris$Petal.Width[iris$Species == \"versicolor\"],\n                 iris$Petal.Width[iris$Species == \"virginica\"],\n                 var.equal = TRUE)\nprint(result, digits = 8)\n\nCarry out an F test of the null hypothesis that the population variance of sepal lengths is the same for flowers of “setosa” and “virginica” species.\n\nresult <- var.test(iris$Sepal.Length[iris$Species == \"setosa\"],\n                   iris$Sepal.Length[iris$Species == \"virginica\"])\nprint(result, digits = 8)\n\nTo three decimal places, what is the lower limit of a 90% confidence interval for the difference between the population mean petal widths for “versicolor” and “virginica” flowers?\n\nresult <- t.test(iris$Petal.Width[iris$Species == \"versicolor\"],\n                 iris$Petal.Width[iris$Species == \"virginica\"],\n                 var.equal = TRUE,\n                 conf.level = 0.90)\nprint(result, digits = 8)\n\n\n\n\n\n\nx <- seq(-2, 2, 0.05)\nx2 <- x^2\nx3 <- x^3\nplot(x, x2)\nlines(x, x3, lwd = 2, col = \"red\")\n\n\n\n\nChickWeight <- ChickWeight\n\n\n\n\n\nCO2 <- CO2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\niris <- iris\n\n\n\n\nModel <- lm(Petal.Length ~ Species - 1, data = iris)\nsummary(Model)\n\nThe coefficient estimates in the above model (no intercept) are just the sample means.\n\n\n\n\nModel <- lm(Petal.Length ~ Species, data = iris)\nsummary(Model)\n\nThe intercept in the above model (intercept included) is the Setosa sample mean. The coefficient estimates are the differences between the respective means and the Setosa mean.\n\n\n\n\nModel <- lm(Petal.Length ~ Species, data = iris, contrasts = list(Species = \"contr.sum\"))\nsummary(Model)\n\nSpecies 1: Setosa\nSpecies 2: Versicolor\nSpecies 3: Virginica\nThe intercept in the above model (“sum to zero” constraint) is the overall mean petal length for all the iris flowers. The coefficients represent the differences between the respective means and the overall mean.\n\n\n\n\nModel <- lm(Petal.Length ~ Species + Sepal.Length, data = iris)\nsummary(Model)\n\nThe intercept in the above model is the expected petal length for Setosa when the sepal length is zero.\n\n\n\n\nModel <- lm(Petal.Length ~ Species + Sepal.Length + Species:Sepal.Length, data = iris)\nsummary(Model)\n\nThe main effect coefficients for Versicolor and Virginica represent differences relative to Setosa. Two additional coefficients for the interactions represent differences in the slopes of the Petal.Length:Sepal.Length relationship for these two species, relative to the slope for Setosa flowers.\nNote: Interactions have nothing to do with correlations between covariates: rather, they relate to the way in which the relationship between one covariate and the response varies with another covariate.\n\n\n\n\n\nload(\"UStemps.rda\")\nustemp$longitude <- -ustemp$longitude\n\n\n\n\nModel1 <- lm(min.temp ~ latitude + longitude, data = ustemp)\nsummary(Model1)\n\n\n\n\n\nModel2 <- lm(min.temp ~ latitude + longitude + I(latitude^2) + I(longitude^2) + latitude:longitude, data = ustemp)\nsummary(Model2)\n\n\n\n\npar(mfrow = c(2,2),\n    mar = c(3,3,2,2),\n    mgp = c(2,0.75,0))\nplot(Model2, which = 1:4)\n\nCook’s Distance plot shows three observations that may be influential, they are:\n\nustemp[c(5, 13, 52), ]\n## 5: Los Angeles, CA\n## 13: Miami, FL\n## 52: Seattle, WA\n\n\n\n\n\n\nModel2Rob <- lmrob(min.temp ~ latitude + longitude + I(latitude^2) + I(longitude^2) + latitude:longitude, data = ustemp)\nsummary(Model2Rob)\n\nNote: the purpose of robust estimation is to try and include all of the observations, but to limit the extent to which any individual observation can influence the fit.\n\n\n\n\n\n\n\nThe main things that can result in incorrect standard errors are non-constant variance and dependence between residuals\n\nSystematic structure in mean residuals\n“Residuals vs Fitted Values” plot, or “Residuals vs Covariates” plot.\nSuch structure indicates that the modelled representation of the regression function is inadequate. Whether this matters is context-specific: you may decide, for example, that the residuals are all so small that your model is already predicting well enough.\nNon-constant variance\n“Residuals vs Fitted Values” plot may exhibit a “funnel” shape (i.e. the residual variance seems higher at one end than the other).\n“Scale-Location” plot: the absolute residuals tend to be larger at one end than the other.\nIn this case, the least-squares estimates are not fully efficient (i.e. you’re not making the best use of your data), and the reported standard errors will be incorrect — as will the results of any hypothesis tests and confidence interval calculations.\nNon-normal residuals\n“Normal Q-Q plot”: the residuals don’t fall roughly on a straight line.\nThis is not critical in large samples, the exception is where you want to calculate prediction intervals for future observations: these will only be accurate if the future observations do indeed have an approximate normal distribution.\nLack of independence\nCommon situations in which it might be a problem are when data are collected at successive time points, or at a collection of spatial locations. Although none of the ‘standard’ plots is designed to check for this, lack of independence can lead to apparent structure in some of the residual plots. For example, if observations are collected sequentially in time and successive residuals are highly correlated, this can give the appearance of curvature in the “Residuals vs Fitted Values” plot: the curvature is not due to a nonlinear relationship between response and covariates, but simply due to the fact that neighbouring residuals are similar to each other because they are correlated.\n\n\n\n\nRule-of-thumb: observation influential if Cook’s distance exceeds \\(\\frac{8}{n-2k}\\), where k is the number of coefficients estimated.\n\n\n\n\nTransform the response variable and / or covariate (but only if the resulting model makes scientific sense). Sometimes, a relationship can be made more linear by taking logs or square roots of one or more quantities; transforming the response variable can also help to make the residual variance more constant, and to make the assumption of normality more reasonable. Don’t take logs (or square roots) of quantities that could be negative, though!\nAdd additional terms to the model. For the temperature data for example, you might consider extending the quadratic model to include third-degree terms in latitude and longitude; or additional covariates such as altitude if these were available.\nIf the diagnostics suggest that the residual variance is related to the fitted values (e.g. the ‘residuals versus fitted values’ plot has a funnel shape) and there is good reason to suspect that the responses follow non-normal distributions (e.g. because they are counts, so that Poisson distributions might be more appropriate) then a more general class of models may be appropriate — such as generalized linear models (GLMs).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nReturn TRUE if there is at least one strictly negative value in a vector x, and FALSE otherwise.\n\nany(x<0)\n\nExtract the elements of a vector x that are both (i) strictly positive (ii) divisible by 10.\n\nx[x>0&x%%10==0]\n\nExtract the rows of a matrix or data frame y for which the corresponding elements of a vector x are non-negative, where x is a vector with length equal to the number of rows of y.\n\ny[x>=0,]\n\nExtract the elements of a vector y for which the corresponding elements of x are strictly negative.\n\ny[x<0]\n\n\n\n\nCreate a function to approximate an integral using the trapezium rule with equally spaced x values.\n\ntrapezium <- function(v, a, b) {\n  n <- length(v) - 1\n  h <- (b - a) / n\n  intv <- (h / 2) * (sum(v) + sum(v[2 : n]))\n  intv\n}\n\nUse the above function to evaluate the integral \\(\\int_{1}^{5}arctan(x)dx\\) with 39 evaluation points (i.e. so that the input vector v has 39 elements).\n\ntrapezium(atan(seq(1, 5,length.out = 39)), 1, 5)\n\n\n\n\n\n\n\n\n\n\nCreate a QuarticMin() function to minimise function \\(h(x)=4x^2+5x+3\\), with starting value \\(x_0=-3\\).\n\nQuarticMin <- function(x0, tol = 1e-6, MaxIter = 100, Verbose = TRUE) {\n  x <- x0\n  Iter <- 0\n  dh.dx <- (8 * x) + 5 # First derivative\n  RelChange <- Inf\n  while (abs(dh.dx) > tol & abs(RelChange) > tol & Iter < MaxIter) {\n    if (Verbose) {\n      cat(paste(\"Iteration\",Iter,\":   Estimate =\",signif(x,5),\n                \"    Gradient = \",signif(dh.dx,5),\"\\n\"))\n    }\n    x.old <- x\n    d2h.dx2 <- 8 # Second derivative\n    x <- x - (dh.dx / d2h.dx2)\n    dh.dx <- (8 * x) + 5 # First derivative\n    RelChange <- (x-x.old) / x.old\n    Iter <- Iter + 1\n  }\n  if (Verbose) cat(\"---\\n\")\n  hmin <- (4 * x^2) + (5 * x) + 3 # Original\n  list(x=x, hx=hmin, gradient=dh.dx, N.iter=Iter)\n}\n\nQuarticMin(-3)\n\nNote: In Iteration n, Estimate = \\(x_{n}\\).\n\n\n\nCreate a tploglik() function to returns the negative log likelihood of a truncated Poisson distribution, up to a constant.\n\ntploglik <- function(theta, y) {\n  n <- length(y)\n  ybar <- mean(y)\n  n * (theta - (ybar * log(theta)) + log(1 - exp(-theta)))\n}\n\nTruncated Poisson Distribution Data\n\nTPdata <- rep(1:14, c(97, 164, 242, 182, 154, 83, 44, 19, 9, 7, 2, 0, 0, 1))\n\nUse nlm() and tploglik() functions to find the maximum likelihood estimate of \\(\\theta\\) together with its estimated standard error. Use the sample mean of the original 1004 values as the starting point for nlm().\n\nTP.fitted <- nlm(tploglik, mean(TPdata), y = TPdata, hessian = TRUE)\n\n\n## The MLE of theta\nTP.fitted$estimate\n## Estimated Standard Error of the MLE\n1 / sqrt(TP.fitted$hessian)\n\n\n\n\nData\n\nNLSdata <- read.table(file = \"nls2.dat\", header = TRUE)\n\nFit a linear model regressing log(Y) on x\n\nModel_Log <- lm(log(Y) ~ x, data = NLSdata)\nsummary(Model_Log)\n\nsumsqerr() function to compute sum of squared errors\n\nsumsqerr <- function(theta, x, Y) {\n  beta0 <- theta[1]\n  beta1 <- theta[2]\n  mu <- beta0 * exp(beta1 * x)\n  sum((Y - mu)^2)\n}\n\nFor your nonlinear model, what is the sum of squared errors for the parameter values \\(\\beta_0=1.4\\), \\(\\beta_1=-0.1\\)?\n\nsumsqerr(c(1.4, -0.1), x = NLSdata$x, Y = NLSdata$Y)\n\nTry fitting your nonlinear model using nlm(), with starting values \\(\\beta_0=-0.8\\) and \\(\\beta_1=-0.6\\). Compare the minimised sum of squares with the value that you obtained in the workshop starting from \\(\\beta_0=1.3\\) and \\(\\beta_1=-0.3\\). Has nlm() located (approximately) the same minimum this time?\n\nNLS.fit1 <- nlm(sumsqerr, c(-0.8, -0.6), x = NLSdata$x, Y = NLSdata$Y, hessian = TRUE)\nNLS.fit2 <- nlm(sumsqerr, c(1.3, -0.3), x = NLSdata$x, Y = NLSdata$Y, hessian = TRUE)\n\nTry fitting the model using nlm(), with starting values \\(\\beta_0=0.2\\) and \\(\\beta_1=0.4\\). At the estimated minimum, what is the (2, 2) element of the Hessian matrix of the sum of squares?\n\nNLS.fit3 <- nlm(sumsqerr, c(0.2, 0.4), x = NLSdata$x, Y = NLSdata$Y, hessian = TRUE)\nNLS.fit3$hessian[2, 2]"
  },
  {
    "objectID": "index.html#what-is-quarto",
    "href": "index.html#what-is-quarto",
    "title": "Cary’s Personal Workspace",
    "section": "What is Quarto?",
    "text": "What is Quarto?\nQuarto helps you have your ideas and your code in one place, and present it in a beautiful way.\nQuarto unifies and extends the RMarkdown ecosystem - it unifies by combining the functionality of R Markdown, bookdown, distill, xaringian, etc into a single consistent system. And it extends in several ways: all features are possible beyond R too, including Python and Javascript. It also has more “guardrails”: accessibility and inclusion are centered in the design. Quarto is for people who love RMarkdown, and it’s for people who have never used RMarkdown.\nThe ability for Quarto to streamline collaboration has been so cool and important for our NASA Openscapes project. Quarto has been a common place for us to collaborate - across R and Python languages and coding expertise."
  },
  {
    "objectID": "index.html#what-is-this-tutorial",
    "href": "index.html#what-is-this-tutorial",
    "title": "Cary’s Personal Workspace",
    "section": "What is this tutorial?",
    "text": "What is this tutorial?\nThis is a 1-hour tutorial that can be used to teach or as self-paced learning.\nWe introduce Quarto by exploring this tutorial website, and practicing the basic Quarto workflow using different tools (GitHub browser, RStudio, and Jupyter) for editing your website.\nWe’ll start off from the browser so you don’t need to install any additional software, however this approach is very limited and you will soon outgrow its capabilities. If you don’t already have a workflow to edit files and sync to GitHub from your computer, I recommend RStudio. You don’t need to know R to use RStudio, and it has powerful editor features that make for happy workflows.\nQuarto.org is the go-to place for full documentation and more tutorials!"
  },
  {
    "objectID": "index.html#example-quarto-sites",
    "href": "index.html#example-quarto-sites",
    "title": "Cary’s Personal Workspace",
    "section": "Example Quarto sites",
    "text": "Example Quarto sites\nA few Quarto websites from Openscapes - so far we have been using Quarto for documentation using Quarto and Markdown files and Jupyter Notebooks.\n\nChampions Lessons Series\nOpenscapes Approach Guide\n\n2021 NASA Cloud Hackathon\nFaylab Lab Manual\nA Quarto tip a day, by Mine Çetinkaya-Rundel"
  },
  {
    "objectID": "index.html#about",
    "href": "index.html#about",
    "title": "Cary’s Personal Workspace",
    "section": "About",
    "text": "About\nOpenscapes is about better science for future us. We help researchers reimagine data analysis, develop modern skills that are of immediate value to them, and cultivate collaborative and inclusive research teams as part of the broader global open movement.\nWe’re developing this tutorial to help folks with different levels of technical skills use Quarto for documentation and tutorial building. This tutorial was originally created for several different audiences: NASA-Openscapes researcher support engineers using Python, communications directors at organizations promoting open science who do not identify as coders, and fisheries scientists curious about transitioning from RMarkdown. We’re hoping it’s useful to folks with backgrounds as wide as these; if you find it useful or have suggestions for improvement, please let us know by clicking “Edit this page” or “Report an issue” at the upper right side of any page."
  },
  {
    "objectID": "explore.html",
    "href": "explore.html",
    "title": "Tools and Tips",
    "section": "",
    "text": "If iCloud gets stuck during the upload process (never finish uploading), open the terminal and try the following:\nkillall bird\nkillall cloudd"
  },
  {
    "objectID": "Tools-and-Tips.html",
    "href": "Tools-and-Tips.html",
    "title": "Tools and Tips",
    "section": "",
    "text": "If iCloud gets stuck during the uploading process (never finish uploading), open the terminal and try the following:\n\n\nTerminal\n\nkillall bird\nkillall cloudd\n\nThe codes above will terminate the core process of file synchronization, and the process will start again automatically after a few seconds."
  },
  {
    "objectID": "quarto-workflows/index.html",
    "href": "quarto-workflows/index.html",
    "title": "UCL Schoolwork",
    "section": "",
    "text": "This is a test page."
  },
  {
    "objectID": "quarto-workflows/index.html#authoring",
    "href": "quarto-workflows/index.html#authoring",
    "title": "UCL Schoolwork",
    "section": "Authoring",
    "text": "Authoring\nAs an author, you have a lot of options of how your text will be formatted, arranged, and interlinked. You will be writing in Markdown, which is a lightweight text formatting language. The Quarto documentation about authoring introduces markdown-basics that will get you started. Also see Mine Çetinkaya-Rundel’s A Quarto tip a day.\nEach page of our site has a similar first few lines - this YAML, like we saw in our _quarto.yml and it is indicated by two sets of 3 dashes --- :\n---\ntitle: My title\n---\nYou’re able to add more features to individual pages by including it in the YAML, which for the most part here only includes a title. See Quarto excecution options for more information of what you can include in the YAML."
  },
  {
    "objectID": "quarto-workflows/index.html#update-_quarto.yml",
    "href": "quarto-workflows/index.html#update-_quarto.yml",
    "title": "UCL Schoolwork",
    "section": "Update _quarto.yml",
    "text": "Update _quarto.yml\nLet’s have a closer look at the _quarto.yml file.\nThis type of file (.yml or .yaml) is written in YAML (“Yet Another Markup Language”). You’ll be able to shift the arrangement of webpages by reordering/adding/deleting them in the _quarto.yml file following the patterns you see in this example.\n\n\n\n_quarto.yml and website side-by-side\n\n\nNotice that there are multiple ways in the _quarto.yml for you to include a file in your website. For example, in the above image, the “First Observations” we see in the left sidebar of the published website (right image) is represented in _quarto.yml (left image) over two lines, with line 36 indicating the file reference and line 37 indicating the text to show up in the left sidebar. However, “From RStudio” is only represented in one line of _quarto.yml, on line 43. This represents two strategies for including a file in your website. By default, the title of a specified file will show up in the website’s sidebar, which is what is happening with the “From RStudio” example. If you would like more control over what is written in the sidebar vs the title of your files, then the approach we took with “First Observations” is what you’ll want to do: you’ll see that only “First Observations” shows up in the sidebar as we specified in _quarto.yml, but the page’s title says “First Observations & Setup” (which in our preference was too long for the sidebar).\n\n\n\n\n\n\nNote\n\n\n\nAs you modify _quarto.yml, the most important thing to know is that spacing matters. Pay attention to whether text is indented by one, two, four, or other spaces, and make sure you follow it; if your site is not looking as expected it is likely a silent error in your YAML. Some text editors like RStudio provide debugging support for YAML and are highly recommended to save you time and heartache."
  },
  {
    "objectID": "quarto-workflows/index.html#install-quarto",
    "href": "quarto-workflows/index.html#install-quarto",
    "title": "UCL Schoolwork",
    "section": "Install Quarto",
    "text": "Install Quarto\nhttps://quarto.org/docs/get-started/ describes how to install Quarto, which will depend on your operating system. We’ll walk through installation for each tool in the next chapters."
  }
]